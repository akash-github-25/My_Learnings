<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #container{
            display:grid;
            grid-template-columns: repeat(4,1fr);
            grid-gap:20px;
        }
    </style>
</head>
<body>
    <button onclick="sort()">sort</button>
    <input type="text" id="query">
    <button onclick="search()">Search</button>
    <div id="container"></div>
</body>
</html>
<script>
    const API_KEY="AIzaSyApLfOkXnsnC18eWoqRGb6jdEPbA-83Bfs"
    // let data=[];
    let q=""
    // 'https://youtube.googleapis.com/youtube/v3/search?part=snippet&maxResults=20&q=kgf&key=AIzaSyApLfOkXnsnC18eWoqRGb6jdEPbA-83Bfs'
    let search = async () => {
  let query=document.getElementById("query").value;
  let data=await getData(query);
  q=query
  append(data);
    }
    let getData= async (query) =>{
        let url=`https://youtube.googleapis.com/youtube/v3/search?part=snippet&maxResults=20&q=${query}&key=${API_KEY}`;
        let res=await fetch(url);
        let data=await res.json();
       return data.items;
       console.log(data)
    };
    let append= (data) =>{
  let container=document.getElementById("container");
  container.innerHTML=null;

  data.forEach((el) => {
   let img=document.createElement("img")
   img.src=el.snippet.thumbnails.medium.url;
    let h3=document.createElement("h3")
    h3.innerText=el.snippet.title

    let div=document.createElement("div");
    div.onclick=() =>{
        saveVideo(el);
    }
    div.setAttribute("class","video");
    div.append(img,h3)
    container.append(div)
  })
    };
    let saveVideo=(data) =>{
        localStorage.setItem("video",JSON.stringify(data))
        window.location.href="video.html";
    };
    let sort=async () =>{
        let data=await getData(q);
        console.log(data)
       data=data.filter((el) =>{
        // return b.snippet.title-a.snippet.title
        // if(a.snippet.title>b.snippet.title){
        //     return 1
        // }
        return el.snippet.channelId=="UClVbhSLxwws-KSsPKz135bw"
      })
  append(data);
    };


</script>